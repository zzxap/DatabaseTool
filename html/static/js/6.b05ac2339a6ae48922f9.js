webpackJsonp([6],{VYlo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("CtzY"),s=a.n(n),i=a("gyMJ"),l=a("/dor"),r={name:"App",data:function(){return{pageid:1,pagesize:50,loadFinish:0,tableData:[],CategoryName:"",errorMessage:"",dialogServer:!1,belong:this.$route.params.belong,form:{sqlString:"",table:"runsql"},querymap:{pageid:this.pageid,pagesize:this.pagesize,table:"database"},rules:{DataBasename:[{required:!0,message:"Please input name",trigger:"change"},{min:1,max:30,message:"length 1 - 30",trigger:"change"}]}}},created:function(){this.belong=this.$route.params.belong,this.form.sqlString=this.$route.params.sql;var e=Object(l.d)("savesql");null!=e&&void 0!=e&&""!=e&&(this.form.sqlString=e)},methods:{getlan:function(e){var t=this.$t("lang."+e);return t.indexOf("lang.")>=0?e:t},init:function(){},goback:function(){this.$router.push({name:"tables"})},showtable:function(e,t){this.$router.push({name:"tables",params:{dbname:t.dbname}})},handleData:function(e,t){this.errorMessage="",e||t?(this.form=t,this.form.mode="edit",this.dialogServer=!0):(this.form.mode="add",this.dialogServer=!0)},handleClose:function(e){this.dialogServer=!1,this.form={id:0,DataBasename:""},this.$refs.form.resetFields()},current_change:function(e){this.pageid=e},handleSizeChange:function(e){this.pagesize=e},handleDelete:function(e,t){var a=this;this.$confirm(this.getlan("delete")+"?",this.getlan("delete"),{confirmButtonText:this.getlan("Execute"),confirmButtonClass:"el-button--danger",cancelButtonText:this.getlan("cancel"),type:"warning"}).then(function(){Object(i.d)("DataBase",t.id).then(function(e){1===e.data.code?(a.dialogDelete=!1,a.init(),a.$message({message:a.getlan("delete")+a.getlan("success"),type:"success"})):(a.dialogDelete=!1,a.$message.error(a.getlan("delete")+a.getlan("fail")))})}).catch(function(){})},comfirmRunSql:function(){var e=this;this.$confirm(this.form.sqlString,this.getlan("Execute"),{confirmButtonText:this.getlan("Execute"),confirmButtonClass:"el-button--danger",cancelButtonText:this.getlan("cancel"),type:"warning"}).then(function(){e.runsql()}).catch(function(){})},runsql:function(){var e=this;if(""!=this.form.sqlString){Object(l.h)("savesql",this.form.sqlString);var t={sql:this.form.sqlString,table:"runsql"};this.errorMessage="",Object(i.a)(s.a.stringify(t)).then(function(t){1==t.data.code?(e.dialogServer=!1,e.tableData=t.data.data,e.$message({message:t.data.message,type:"success"})):null!=t.data.message&&(e.errorMessage=t.data.message,e.alert_ok(t.data.message))})}else this.alert_ok("sql is null")}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-back"},on:{click:function(t){return e.goback()}}}),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.init()}}}),e._v(" "),a("div",{staticClass:"demonstration h_title"},[e._v("Run SQL "+e._s(this.errorMessage))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirmRunSql()}}},[e._v(e._s(e.getlan("Execute")))])],1)],1),e._v(" "),a("el-input",{attrs:{type:"textarea",autosize:{minRows:6},placeholder:"sqlString"},model:{value:e.form.sqlString,callback:function(t){e.$set(e.form,"sqlString",t)},expression:"form.sqlString"}}),e._v(" "),a("el-table",{staticStyle:{"font-size":"15px"},attrs:{data:e.tableData,height:"500","row-style":{height:"40px"},"cell-style":{padding:"0"}}},[e._l(e.tableData[0],function(e,t){return a("el-table-column",{key:t,attrs:{prop:t,label:t}})}),e._v(" "),a("el-table-column",{attrs:{label:e.getlan("operate"),width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-document"},on:{click:function(a){return e.showtable(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.handleData(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],2),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"}),e._v(" "),a("el-pagination",{attrs:{layout:"prev, next","page-sizes":[50,100,500],"page-size":this.pagesize,total:this.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.current_change}})],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(r,o,!1,function(e){a("m3PY")},"data-v-5277b9e2",null);t.default=c.exports},m3PY:function(e,t){}});
//# sourceMappingURL=6.b05ac2339a6ae48922f9.js.map