webpackJsonp([0],{cbWt:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});o("kV13");var s=o("CtzY"),n=o.n(s),a=o("bQIR"),r=o("gyMJ"),i=o("/dor");o("OV27");o("pWj9"),o("hRKE");function l(e,t,o){if(!t)return o(new Error("输入不可以为空"));setTimeout(function(){if(Number(t)){/^[0-9]*[1-9][0-9]*$/.test(t)?o():o(new Error("请输入正整数"))}else o(new Error("请输入正整数"))},0)}function c(e,t,o){if(!t)return o(new Error("输入不可以为空"));setTimeout(function(){/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)?o():o(new Error("请输入ip"))},0)}var p=void 0,d={name:"app",data:function(){return{errorMessage:"",fileList:[],form:{hiddenSetDb:!1,userid:Object(i.d)("userid"),table:"connectdb",ip:"",port:"",username:"",password:"",dbname:"",dbtype:"",sshHost:"",sshPort:"",sshUser:"",sshPass:""},rules:{ip:[{required:!0,message:"Please input ip",trigger:"blur"},{validator:c,message:"ip wrong",trigger:"blur"}],port:[{required:!0,message:"Please input port",trigger:"blur"},{validator:l,message:"port wrong",trigger:"blur"}]},browername:"",tabPosition:"top",tabproPosition:"top",id:"",message:"",printstr:"",sudokus:[],curSelect:null}},components:{},mounted:function(){window.gotopage=this.gotopage},created:function(){Object(i.f)()?this.hiddenSetDb=!1:this.hiddenSetDb=!0,window.location.host.indexOf(":")>0&&(this.ip=window.location.host.split(":")[0],this.port=window.location.host.split(":")[1]),null!=this.ip&&void 0!=this.ip&&this.ip,this.browername=navigator.userAgent;var e=Object(i.a)();(Object(i.h)("BrowerName",e),void 0!=Object(i.d)("dbip")&&(this.form.ip=Object(i.d)("dbip")),void 0!=Object(i.d)("dbport")&&(this.form.port=Object(i.d)("dbport")),void 0!=Object(i.d)("dbusername")&&(this.form.username=Object(i.d)("dbusername")),void 0!=Object(i.d)("dbtype"))&&("sqlite"!=Object(i.d)("dbtype")&&(this.form.dbtype=Object(i.d)("dbtype")));void 0!=Object(i.d)("sshHost")&&(this.form.sshHost=Object(i.d)("sshHost")),void 0!=Object(i.d)("sshPort")&&(this.form.sshPort=Object(i.d)("sshPort")),void 0!=Object(i.d)("sshUser")&&(this.form.sshUser=Object(i.d)("sshUser")),void 0!=Object(i.d)("sshPass")&&(this.form.sshPass=Object(i.d)("sshPass")),void 0!=Object(i.d)("dbpassword")&&(this.form.password=Object(i.d)("dbpassword"))},methods:{getlan:function(e){var t=this.$t("lang."+e);return t.indexOf("lang.")>=0?e:t},getadImgUrl:function(){return"http://"+Object(i.d)("ip")+":8081/invoicing/images/ad.png"},startLoading:function(){p=a.Loading.service({lock:!0,text:"Uploading...",target:document.querySelector(".upload")})},endLoading:function(){p.close()},reload:function(){window.location.reload()},showinvoice:function(){window.open("https://itunes.apple.com/cn/app/id1372437743?mt=12")},showinvoice2:function(){window.open("https://itunes.apple.com/cn/app/id643680862?mt=12")},gotopage:function(e){this.$router.push({name:e})},selectdbtype:function(e){this.form.dbtype=e,"postgres"==e?(this.form.port="5432",this.form.username="postgres"):"mysql"==e?(this.form.port="3306",this.form.username="root"):"mssql"==e?(this.form.port="1443",this.form.username="sa"):"etcd"==e?(this.form.port="2379",this.form.username=""):"mongodb"==e&&(this.form.port="27017",this.form.username="")},goback:function(){void 0==Object(i.d)("userid")?this.$router.push({name:"login"}):this.$router.push({name:"help"})},demo:function(){var e=this;this.errorMessage="Loading...",Object(r.e)(n.a.stringify({dbtype:"sqlite",table:"connectdb",dbname:"db.sqlite"})).then(function(t){1===t.data.code?(Object(i.h)("dbtype","sqlite"),Object(i.h)("token",t.data.token),e.$router.push({name:"database"})):(e.alert_fail(t.data.message),e.errorMessage=t.data.message)})},testconnect:function(){var e=this;this.form.dbtype.length>2&&this.form.ip.length>6&&this.form.port.length>0?"etcd"==this.form.dbtype||""!=this.form.username&&""!=this.form.password?(Object(i.h)("dbip",this.form.ip),this.errorMessage="Loading...",this.$confirm("Connect","",{confirmButtonText:this.getlan("Connect"),cancelButtonText:this.getlan("cancel"),type:"warning"}).then(function(){var t;(t=e.form,Object(r.c)(n.a.stringify(t)).then(function(e){return e})).then(function(t){1===t.data.code?(Object(i.h)("dbip",e.form.ip),Object(i.h)("dbport",e.form.port),Object(i.h)("dbusername",e.form.username),Object(i.h)("dbpassword",e.form.password),Object(i.h)("dbname",e.form.dbname),Object(i.h)("dbtype",e.form.dbtype),Object(i.h)("token",t.data.token),Object(i.h)("sshHost",e.form.sshHost),Object(i.h)("sshPort",e.form.sshPort),Object(i.h)("sshUser",e.form.sshUser),Object(i.h)("sshPass",e.form.sshPass),e.alert_ok(e.getlan("success goto db")),"etcd"==e.form.dbtype?e.$router.push({name:"etcd"}):e.$router.push({name:"database"})):(e.alert_fail(t.data.message),e.errorMessage=t.data.message)})}).catch(function(){})):this.alert_fail("please input username and password"):this.alert_ok("Please input correct info")},changeLangEvent:function(){var e=this;console.log("changeLangEvent"),this.$confirm("Change Language?","tips",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then(function(){"zh-CN"===e.$i18n.locale?(e.$i18n.locale="en-US",console.log("en-US")):(e.$i18n.locale="zh-CN",console.log("zh-CN"))}).catch(function(){console.log("catch"),e.$message({type:"info"})})},downloadSqlite:function(){var e=Object(i.d)("filename");window.location.host;window.location.host.replace("8080","8082");var t="http://127.0.0.1:8082/db/"+e,o={url:t};Object(r.g)(n.a.stringify(o)).then(function(e){}),this.errorMessage="Download "+t,i.d},uploadSqlite:function(){var e=this;if(0!=this.fileList.length)if(this.fileList.length>1)this.alert_ok(this.getlan("Please_select_only_one_Sqlite_file"));else{var t=new FormData;this.fileList.forEach(function(o){t.append("dbname",o.raw.name),e.form.dbname=o.raw.name,t.append("reportFile",o.raw,o.raw.name)}),t.append("table","uploadsqlite"),this.startLoading(),Object(r.e)(t).then(function(t){e.endLoading(),1==t.data.code?(e.dialogServer=!1,e.$refs.upload.clearFiles(),Object(i.h)("dbname",e.form.dbname),Object(i.h)("dbtype","sqlite"),Object(i.h)("token",t.data.token),e.$router.push({name:"database"})):e.$message.error(t.data.message)})}else this.alert_ok(this.getlan("Please_select_a_Sqlite_file"))},beforeAvatarUpload:function(e){var t=e.name.split(".");return"sqlite"===t[1]||"db"===t[1]||"Sqlite"===t[1]?e:(this.$message.error("need   .sqlite"),!1)},onChange:function(e,t){return t.length>1?(t.pop(),void this.$message.error("Only one file")):e.name.indexOf("db")<0&&e.name.indexOf("sqlite")<0&&e.name.indexOf("DB")<0&&e.name.indexOf("Sqlite")<0?(this.$message.error("need  sqlite or db file"),void t.pop()):(t.slice(0,t.length-1).find(function(t){return t.name===e.name})&&(this.$message.error("File exists"),t.pop()),this.fileList=t,Object(i.h)("filename",e.name),void this.uploadSqlite())},handleRemove:function(e,t){this.fileList.fileList,console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("limit "+e.length+" but "+(e.length+t.length)+" ")},beforeRemove:function(e,t){return this.$confirm("remove "+e.name+"？")},handleSuccess:function(e,t){this.endLoading(),1==e.data.code?(this.dialogServer=!1,this.$refs.upload.clearFiles()):this.$message.error(e.data.message)},tabLangClick:function(e){this.$i18n.locale=e,Object(i.h)("lan",e)},tabSetClick:function(e){Object(i.h)("productset",e)}},checkedChange:function(){console.log(this.checked)},getImgUrl:function(){return"http://"+Object(i.c)()+"/Picture/qrcode.png"},doprint:function(){this.$htmlToPaper("printMe")},showandroid:function(){window.open("http://www.iosbuy.com/app/AndroidInvoiceOnline.htm")},showios:function(){window.open("https://itunes.apple.com/cn/app/elink-invoice-online-for-purchase/id634263772?l=zh")},touchstart:function(e){for(var t=this.sudokus,o=0,s=t.length;o<s;++o)t[o].id==e&&(this.curSelect=o)},touchend:function(){this.curSelect=null}},f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-main",[o("div",{staticStyle:{width:"100%",float:"lef"}},[o("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.reload()}}})],1),e._v(" "),o("div",{staticStyle:{width:"100%",float:"lef"}},[o("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{float:"left","margin-left":"20px"},attrs:{data:e.form,"on-change":e.onChange,action:"/api/AddData.ashx","on-preview":e.handlePreview,"before-upload":e.beforeAvatarUpload,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"file-list":e.fileList,name:"filename","auto-upload":!1}},[o("span",[o("el-button",{staticStyle:{float:"left","margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-upload"}},[e._v(e._s(e.getlan("ImportSqlite")))])],1)]),e._v(" "),o("el-button",{staticStyle:{float:"left","margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.downloadSqlite()}}},[e._v(e._s(e.getlan("ExportSqlite")))])],1),e._v(" "),o("div",{staticStyle:{width:"100%","margin-top":"20px",float:"left"}},[o("el-radio-group",{staticStyle:{float:"left","margin-left":"10px"},on:{change:e.tabLangClick},model:{value:e.tabPosition,callback:function(t){e.tabPosition=t},expression:"tabPosition"}},[o("el-radio-button",{attrs:{label:"en-US"}},[e._v("English")]),e._v(" "),o("el-radio-button",{attrs:{label:"zh-CN"}},[e._v("中文")])],1)],1),e._v(" "),o("div",{staticStyle:{width:"1000px",float:"left",margin:"10px",padding:"5px",border:"1px solid #D6D6D6"}},[o("el-form",{ref:"form",staticClass:"el-form--label-top",attrs:{model:e.form,rules:e.rules,"label-position":"left"}},[o("el-row",{staticClass:"row-bg",staticStyle:{margin:"10px"},attrs:{type:"flex"}}),e._v(" "),o("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[o("el-form-item",{attrs:{label:"",prop:"dbtype"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("dbtype")))]),e._v(" "),o("el-select",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:e.$t("lang.Select")},on:{change:function(t){return e.selectdbtype(e.form.dbtype)}},model:{value:e.form.dbtype,callback:function(t){e.$set(e.form,"dbtype",t)},expression:"form.dbtype"}},[o("el-option",{attrs:{label:"postgres",value:"postgres"}}),e._v(" "),o("el-option",{attrs:{label:"mysql",value:"mysql"}}),e._v(" "),o("el-option",{attrs:{label:"mssql",value:"mssql"}}),e._v(" "),o("el-option",{attrs:{label:"etcd",value:"etcd"}})],1)],1)],1),e._v(" "),o("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[o("el-form-item",{attrs:{label:"",prop:"ip"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("ip")))]),e._v(" "),o("el-input",{attrs:{"auto-complete":"off",placeholder:""},model:{value:e.form.ip,callback:function(t){e.$set(e.form,"ip",t)},expression:"form.ip"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"port"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("port")))]),e._v(" "),o("el-input",{attrs:{"auto-complete":"off",placeholder:""},model:{value:e.form.port,callback:function(t){e.$set(e.form,"port",t)},expression:"form.port"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"username"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("username")))]),e._v(" "),o("el-input",{attrs:{"auto-complete":"off",placeholder:""},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"password"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("password")))]),e._v(" "),o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),o("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[o("el-form-item",{attrs:{label:"",prop:"sshHost"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("sshHost")))]),e._v(" "),o("el-input",{attrs:{"auto-complete":"off",placeholder:"option"},model:{value:e.form.sshHost,callback:function(t){e.$set(e.form,"sshHost",t)},expression:"form.sshHost"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"sshPort"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("sshPort")))]),e._v(" "),o("el-input",{attrs:{"auto-complete":"off",placeholder:"option"},model:{value:e.form.sshPort,callback:function(t){e.$set(e.form,"sshPort",t)},expression:"form.sshPort"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"sshUser"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("sshUser")))]),e._v(" "),o("el-input",{attrs:{"auto-complete":"off",placeholder:"option"},model:{value:e.form.sshUser,callback:function(t){e.$set(e.form,"sshUser",t)},expression:"form.sshUser"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"",prop:"sshPass"}},[o("span",{staticClass:"tlabel"},[e._v(e._s(e.getlan("sshPass")))]),e._v(" "),o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"option"},model:{value:e.form.sshPass,callback:function(t){e.$set(e.form,"sshPass",t)},expression:"form.sshPass"}})],1)],1),e._v(" "),o("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[o("el-button",{staticStyle:{width:"200px",float:"right","margin-left":"150px"},attrs:{type:"primary"},on:{click:function(t){return e.testconnect()}}},[e._v(e._s(e.getlan("Connect")))]),e._v(" "),o("el-button",{staticStyle:{width:"200px",float:"right","margin-left":"150px"},attrs:{type:"primary"},on:{click:function(t){return e.demo()}}},[e._v(e._s(e.getlan("Demo")))])],1)],1)],1),e._v(" "),o("div",{staticStyle:{width:"100%",float:"left","margin-top":"10px"}}),e._v(" "),o("div",{staticClass:"demonstration h_title"},[o("font",[e._v("  "+e._s(this.errorMessage))])],1)])},staticRenderFns:[]};var u=o("C7Lr")(d,f,!1,function(e){o("iPcB")},null,null);t.default=u.exports},iPcB:function(e,t){},pWj9:function(e,t){e.exports=function(e){function t(s){if(o[s])return o[s].exports;var n=o[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var o={};return t.m=e,t.c=o,t.d=function(e,o,s){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:s})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.prototype.$htmlToPaper=function(e,o){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},n=t.name,a=void 0===n?"_blank":n,r=t.specs,i=void 0===r?["fullscreen=yes","titlebar=yes","scrollbars=yes"]:r,l=t.replace,c=void 0===l||l,p=t.styles,d=void 0===p?[]:p;o&&(o.name&&(a=o.name),o.specs&&(i=o.specs),o.replace&&(c=o.replace),o.styles&&(d=o.styles)),console.warn(d),i=i.length?i.join(","):"";var f=document.getElementById(e);if(f){var u=window.open("",a,i,c);return u.document.write("\n        <html>\n          <head>\n            <title>"+document.title+"</title>\n          </head>\n          <body>\n            "+f.innerHTML+"\n          </body>\n        </html>\n      "),function(e,t){t.forEach(function(t){var o=e.document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("type","text/css"),o.setAttribute("href",t),e.document.getElementsByTagName("head")[0].appendChild(o)})}(u,d),setTimeout(function(){u.document.close(),u.focus(),u.print(),u.close(),s()},1e3),!0}alert("Element to print #"+e+" not found!")}}}}])}});
//# sourceMappingURL=0.276687edc86b14689bfa.js.map