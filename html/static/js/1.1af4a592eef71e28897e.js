webpackJsonp([1],{HzJ8:function(t,e,n){t.exports={default:n("P/sN"),__esModule:!0}},MeKl:function(t,e){},"P/sN":function(t,e,n){n("MJJS"),n("at0p"),t.exports=n("eBrH")},eBrH:function(t,e,n){var a=n("xgeF"),r=n("PsHI");t.exports=n("ZuHZ").getIterator=function(t){var e=r(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return a(e.call(t))}},o9Jl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("HzJ8"),r=n.n(a),i=n("CtzY"),s=n.n(i),l=n("gyMJ"),o=n("/dor"),u={name:"App",data:function(){return{pageid:1,pagesize:50,loadFinish:0,total:0,tableData:[],CategoryName:"",errorMessage:"",dialogServer:!1,belong:this.$route.params.belong,tablename:this.$route.params.tablename,sqlString:"",form:{table:"runsql"},querymap:{pageid:this.pageid,pagesize:this.pagesize,table:"database"},rules:{DataBasename:[{required:!0,message:"Please input name",trigger:"change"},{min:1,max:30,message:"length 1 - 30",trigger:"change"}]}}},created:function(){this.belong=this.$route.params.belong,this.tablename=this.$route.params.tablename;var t=Object(o.d)("dbtype");this.sqlString="mssql"==t?"select top 50  * from "+this.tablename+" ":"select * from "+this.tablename+" limit 50 ",this.runsql()},methods:{getlan:function(t){var e=this.$t("lang."+t);return e.indexOf("lang.")>=0?t:e},init:function(){},goback:function(){this.$router.push({name:"tables"})},showtable:function(t,e){this.$router.push({name:"tables",params:{dbname:e.dbname}})},handleAdd:function(t,e){this.errorMessage="",this.sqlString="insert into "+this.tablename+" ( ";var n="",a="";for(var r in e)n+=r+",",a+="'"+e[r]+"',";this.sqlString+=n.substring(0,n.length-1)+")  values  ( "+a.substring(0,a.length-1)+") ",this.form=e,this.dialogServer=!0},handleData:function(t,e){for(var n in this.errorMessage="",this.sqlString="update "+this.tablename+" set ",e)this.sqlString+=" "+n+"='"+e[n]+"',";this.sqlString=this.sqlString.substring(0,this.sqlString.length-1),this.sqlString+="  where xx=xx ",this.form=e,this.form.mode="edit",this.dialogServer=!0},handleDelete:function(t,e){this.sqlString="delete from  "+this.tablename+" where xx=xxx ",this.dialogServer=!0},handleClose:function(t){this.dialogServer=!1,this.form={id:0,DataBasename:""},this.$refs.form.resetFields()},current_change:function(t){this.alert_ok(t),this.pageid=t},handleSizeChange:function(t){this.pagesize=t},customLabel:function(t){var e="",n=!0,a=!1,i=void 0;try{for(var s,l=r()(t);!(n=(s=l.next()).done);n=!0){var o=s.value;" "!==o&&(e+=o)}}catch(t){a=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return e},flexColumnWidth:function(t){var e=0,n=!0,a=!1,i=void 0;try{for(var s,l=r()(t);!(n=(s=l.next()).done);n=!0){var o=s.value;e+=o>="A"&&o<="Z"||o>="a"&&o<="z"?8:o>="一"&&o<="龥"?20:5}}catch(t){a=!0,i=t}finally{try{!n&&l.return&&l.return()}finally{if(a)throw i}}return(e=16*t.length)<50&&(e=50),e>250&&(e=250),e},comfirmRunSql:function(){var t=this;this.$confirm(this.sqlString,this.getlan("Execute"),{confirmButtonText:this.getlan("Execute"),confirmButtonClass:"el-button--danger",cancelButtonText:this.getlan("cancel"),type:"warning"}).then(function(){t.runsql()}).catch(function(){})},runsql:function(){var t=this;if(""!=this.sqlString){var e={sql:this.sqlString,table:"runsql"};this.errorMessage="",Object(l.a)(s.a.stringify(e)).then(function(e){1==e.data.code?(t.dialogServer=!1,t.tableData=e.data.data,t.total=t.tableData.length):null!=e.data.message&&(t.errorMessage=e.data.message,t.alert_ok(e.data.message))})}else this.alert_ok("sql is null")}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("el-row",[n("el-col",{attrs:{span:24}},[n("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-back"},on:{click:function(e){return t.goback()}}}),t._v(" "),n("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(e){return t.init()}}}),t._v(" "),n("div",{staticClass:"demonstration h_title"},[t._v("Run SQL "+t._s(this.errorMessage))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.comfirmRunSql()}}},[t._v(t._s(t.getlan("Execute")))])],1)],1),t._v(" "),n("el-input",{attrs:{type:"textarea",autosize:{minRows:3},placeholder:"sqlString"},model:{value:t.sqlString,callback:function(e){t.sqlString=e},expression:"sqlString"}}),t._v(" "),n("el-table",{staticStyle:{"font-size":"14px"},attrs:{data:t.tableData,height:"500"}},[t._l(t.tableData[0],function(t,e){return n("af-table-column",{key:e,attrs:{prop:e,label:e}})}),t._v(" "),n("el-table-column",{attrs:{label:t.getlan("operate"),width:"260"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(n){return t.handleAdd(e.$index,e.row)}}}),t._v(" "),n("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(n){return t.handleData(e.$index,e.row)}}}),t._v(" "),n("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(n){return t.handleDelete(e.$index,e.row)}}})]}}])})],2),t._v(" "),n("div",{staticClass:"block"},[n("span",{staticClass:"demonstration"}),t._v(" "),n("el-pagination",{attrs:{layout:"prev, next","page-sizes":[50,100,500],"page-size":this.pagesize,total:this.total},on:{"size-change":t.handleSizeChange,"current-change":t.current_change}})],1)],1)},staticRenderFns:[]};var h=n("C7Lr")(u,c,!1,function(t){n("MeKl")},"data-v-cbe973fa",null);e.default=h.exports}});
//# sourceMappingURL=1.1af4a592eef71e28897e.js.map