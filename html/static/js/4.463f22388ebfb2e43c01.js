webpackJsonp([4],{"4lLX":function(e,t){},"82gT":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("CtzY"),s=a.n(n),i=a("gyMJ"),r=a("/dor"),l={name:"App",data:function(){return{pageid:1,total:0,pagesize:50,loadFinish:0,tableData:[],CategoryName:"",sqlString:"",dialogServer:!1,belong:this.$route.params.belong,form:{id:0,warehousename:"",remark:"",table:"column",tableData:[],mode:"",userid:Object(r.d)("userid"),belong:this.$route.params.belong},querymap:{pageid:this.pageid,pagesize:this.pagesize,table:"column",tablename:this.$route.params.tablename},rules:{warehousename:[{required:!0,message:"Please input name",trigger:"change"},{min:1,max:30,message:"length 1 - 30",trigger:"change"}]}}},created:function(){this.belong=this.$route.params.belong,this.init()},methods:{getlan:function(e){var t=this.$t("lang."+e);return t.indexOf("lang.")>=0?e:t},init:function(){var e=this;null!=this.$route.params.dbname?(this.querymap.dbname=this.$route.params.dbname,Object(r.h)("tablename",this.$route.params.dbname)):this.querymap.dbname=Object(r.d)("tablename"),Object(i.e)(s.a.stringify(this.querymap)).then(function(t){e.tableData=t.data.data,e.total=t.data.total,e.pagesize=t.data.pagesize})},goback:function(){this.$router.push({name:"tables"})},handleAdd:function(e,t){t.column_name,t.data_type;this.errorMessage="",this.sqlString="alter table "+this.querymap.tablename+" add  column xxx varchar(10); ",this.dialogServer=!0},handleData:function(e,t){var a=t.column_name,n=t.data_type;this.sqlString="ALTER TABLE   "+this.querymap.tablename+" change  column "+a+" new"+a+" "+n,this.dialogServer=!0},handleDelete:function(e,t){var a=t.column_name;t.data_type;this.sqlString="ALTER TABLE "+this.querymap.tablename+" DROP COLUMN "+a,this.dialogServer=!0},handleClose:function(e){this.dialogServer=!1,this.form={id:0,warehousename:""},this.$refs.form.resetFields()},current_change:function(e){var t=this;this.pageid=e,Object(i.e)(s.a.stringify(this.querymap)).then(function(e){t.tableData=e.data.data,t.total=e.data.total,t.pagesize=e.data.pagesize})},handleSizeChange:function(e){this.pagesize=e},create:function(e){var t=this;""!=e.warehousename?(this.form.table="warehouse",this.form.userid=Object(r.d)("userid"),this.form.belong=this.$route.params.belong,e.tableData='{"id":"'+this.form.id+'","warehousename":"'+e.warehousename+'","remark":"'+e.remark+'"}|',Object(i.a)(s.a.stringify(this.form)).then(function(e){1==e.data.code?(t.dialogServer=!1,t.form.warehousename="",t.form.remark="",t.init(),t.$message({message:"success",type:"success"})):"exists"==e.data.message?t.$message.error(t.getlan("Exists")):t.$message.error(e.data.message)})):this.alert_ok("warehousename is null")},comfirmRunSql:function(){var e=this;this.$confirm(this.sqlString,this.getlan("Execute"),{confirmButtonText:this.getlan("Execute"),confirmButtonClass:"el-button--danger",cancelButtonText:this.getlan("cancel"),type:"warning"}).then(function(){e.runsql()}).catch(function(){})},runsql:function(){var e=this;if(""!=this.sqlString){var t={sql:this.sqlString,table:"runsql"};this.errorMessage="",Object(i.a)(s.a.stringify(t)).then(function(t){1==t.data.code?(e.dialogServer=!1,e.tableData=t.data.data,e.$message({message:t.data.message,type:"success"})):null!=t.data.message&&(e.errorMessage=t.data.message,e.alert_ok(t.data.message))})}else this.alert_ok("sql is null")}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-back"},on:{click:function(t){return e.goback()}}}),e._v(" "),a("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"el-icon-refresh"},on:{click:function(t){return e.init()}}}),e._v(" "),a("div",{staticClass:"demonstration h_title"},[e._v(e._s(e.querymap.tablename)),a("font")],1),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){return e.handleData()}}})],1)],1),e._v(" "),a("el-table",{staticStyle:{"font-size":"15px"},attrs:{data:e.tableData,height:"500","row-style":{height:"40px"},"cell-style":{padding:"0"}}},[e._l(e.tableData[0],function(e,t){return a("el-table-column",{key:t,attrs:{prop:t,label:t}})}),e._v(" "),a("el-table-column",{attrs:{label:e.getlan("operate"),width:"260"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(a){return e.handleAdd(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-edit"},on:{click:function(a){return e.handleData(t.$index,t.row)}}}),e._v(" "),a("el-button",{attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}})]}}])})],2),e._v(" "),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"}),e._v(" "),a("el-pagination",{attrs:{layout:"prev, next","page-sizes":[50,200,300],"page-size":this.pagesize,total:this.total},on:{"size-change":e.handleSizeChange,"current-change":e.current_change}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.getlan("RunSQL"),visible:e.dialogServer,width:this.getDialogWidth(),"show-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.dialogServer=t}}},[a("el-form",{ref:"form",staticClass:"el-form--label-top",attrs:{model:e.form,rules:e.rules}},[a("el-form-item",{attrs:{label:e.getlan("RunSQL"),prop:"sqlString"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6},placeholder:"sqlString"},model:{value:e.sqlString,callback:function(t){e.sqlString=t},expression:"sqlString"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.handleClose("form")}}},[e._v(e._s(e.getlan("cancel")))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.comfirmRunSql()}}},[e._v(e._s(e.getlan("Execute")))])],1)],1)],1)},staticRenderFns:[]};var c=a("C7Lr")(l,o,!1,function(e){a("4lLX")},"data-v-d77a844a",null);t.default=c.exports}});
//# sourceMappingURL=4.463f22388ebfb2e43c01.js.map